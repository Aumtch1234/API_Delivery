# ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏ó‡∏™ Admin Approve TopUp API ‡πÉ‡∏ô Postman

## üîß ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Postman

### 1. **Method ‡πÅ‡∏•‡∏∞ URL**
- **Method**: `PUT`
- **URL**: `{{baseURL}}/admin/topups/:topup_id/approve`
- **‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á**: `http://localhost:3000/admin/topups/4/approve`

### 2. **Headers**
```
Authorization: Bearer YOUR_JWT_TOKEN
Content-Type: application/json
```

### 3. **Path Variables**
- `topup_id`: ‡∏£‡∏´‡∏±‡∏™‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥/‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò (‡πÄ‡∏ä‡πà‡∏ô 4)

### 4. **Body (JSON)**

**‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥:**
```json
{
    "status": "approved"
}
```

**‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò:**
```json
{
    "status": "rejected",
    "rejection_reason": "‡∏™‡∏•‡∏¥‡∏õ‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô"
}
```

## üìã ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### Step 1: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Request
1. ‡πÄ‡∏õ‡∏¥‡∏î Postman
2. ‡∏™‡∏£‡πâ‡∏≤‡∏á request ‡πÉ‡∏´‡∏°‡πà
3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å method ‡πÄ‡∏õ‡πá‡∏ô `PUT`
4. ‡πÉ‡∏™‡πà URL: `http://localhost:3000/admin/topups/4/approve`

### Step 2: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Authorization
1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà tab "Authorization"
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Type ‡πÄ‡∏õ‡πá‡∏ô "Bearer Token"
3. ‡πÉ‡∏™‡πà JWT token ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£ login admin

### Step 3: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Headers
1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà tab "Headers"
2. ‡πÄ‡∏û‡∏¥‡πà‡∏° header:
   - Key: `Content-Type`
   - Value: `application/json`

### Step 4: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Body
1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà tab "Body"
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "raw"
3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "JSON" ‡∏à‡∏≤‡∏Å dropdown
4. ‡πÉ‡∏™‡πà JSON data:
```json
{
    "status": "approved"
}
```

### Step 5: ‡∏™‡πà‡∏á Request
- ‡∏Ñ‡∏•‡∏¥‡∏Å "Send"

## ‚úÖ Response ‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á

**‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (200):**
```json
{
    "success": true,
    "message": "‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",
    "data": {
        "topup_id": 4,
        "user_id": 33,
        "rider_id": 8,
        "amount": 100.00,
        "status": "approved",
        "admin_id": 1,
        "approved_at": "2025-09-15T20:35:00.000Z",
        "updated_at": "2025-09-15T20:35:00.000Z"
    }
}
```

**Error (400):**
```json
{
    "success": false,
    "error": "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (status) ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠"
}
```

## üö® ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢

### 1. "Cannot destructure property 'status' of 'req.body'"
**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏**: Postman ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡πà‡∏á JSON body
**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**: 
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "raw" ‡πÅ‡∏•‡∏∞ "JSON" ‡πÉ‡∏ô Body tab
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Content-Type header ‡πÄ‡∏õ‡πá‡∏ô "application/json"

### 2. "401 Unauthorized"
**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏**: JWT token ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏
**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**: 
- Login admin ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö token ‡πÉ‡∏´‡∏°‡πà
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Authorization header

### 3. "404 Not Found"
**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏**: topup_id ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**: 
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö topup_id ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏≤‡∏Å GET `/admin/topups/pending`

## üß™ ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

1. **‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥**:
   ```json
   { "status": "approved" }
   ```

2. **‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò**:
   ```json
   { 
       "status": "rejected", 
       "rejection_reason": "‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô" 
   }
   ```

3. **‡∏ó‡∏î‡∏™‡∏≠‡∏ö Error Cases**:
   - ‡∏™‡πà‡∏á body ‡πÄ‡∏õ‡πá‡∏ô string ‡πÅ‡∏ó‡∏ô JSON
   - ‡πÑ‡∏°‡πà‡∏™‡πà‡∏á status
   - ‡∏™‡πà‡∏á status ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á